package talk.kmp;import java.util.Arrays;/** * 检测两个字符串是否为旋转字符串 */public class IsRotation {    public static boolean isRotation(String str1, String str2){        if (str1 == null || str2 == null || str1.length() < 1 || str2.length() < 1 || str1.length() != str2.length()){            return false;        }        char[] source = (str1 + str1).toCharArray();        char[] target = str2.toCharArray();        int[] nextArray = getNextArray(target);        int curSourcePoint = 0;        int curTargetPoint = 0;        while (curSourcePoint < source.length && curTargetPoint < target.length){            if (source[curSourcePoint] == target[curTargetPoint]){                curSourcePoint++;                curTargetPoint++;            }else if (nextArray[curTargetPoint] != -1){                curTargetPoint = nextArray[curTargetPoint];            }else {                curSourcePoint++;            }        }        return curTargetPoint == target.length;    }    private static int[] getNextArray(char[] chars){        if (chars.length == 1){            return new int[]{-1};        }else if (chars.length == 2){            return new int[]{-1,0};        }else {            int[] res = new int[chars.length];            res[0] = -1;            res[1] = 0;            int i = 2;            int curCompare = 0;            while (i < chars.length){                if (chars[i - 1] == chars[curCompare]){                    res[i++] = ++curCompare;                }else if (res[curCompare] > 0){                    curCompare = res[curCompare];                }else {                    i++;                }            }            return res;        }    }    public static String generateRandomString(int maxLength){        int len = (int)(Math.random() * maxLength) + 1;        char[] chars = new char[len];        for (int i = 0; i < len; i++) {            chars[i] = (char)((int)'a' + (int)(Math.random() * 26) + 1);        }        return String.valueOf(chars);    }    public static void main(String[] args) {        String randomString = generateRandomString(50);        boolean rotation = isRotation(randomString, randomString);        System.out.println(rotation);//        System.out.println(Arrays.toString(KMP.getIndexInfo(chars)));//        System.out.println(Arrays.toString(getNextArray(chars)));    }}